<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="We describe the sources of our data and the cleaning process.">

<title>MA [46]15 Final Project: Group 10 - Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">MA [46]15 Final Project: Group 10</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">MA [46]15 Final Project: Group 10</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./big_picture.html"> 
<span class="menu-text">Locked Down by COVID-19: The Racial Reality of California’s Prisons</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./analysis.html"> 
<span class="menu-text">Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./data.html" aria-current="page"> 
<span class="menu-text">Data</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-background" id="toc-data-background" class="nav-link active" data-scroll-target="#data-background">Data Background</a>
  <ul class="collapse">
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources">Data Sources</a></li>
  <li><a href="#data-set-1-prison-admissions-and-releases" id="toc-data-set-1-prison-admissions-and-releases" class="nav-link" data-scroll-target="#data-set-1-prison-admissions-and-releases">Data Set 1: Prison Admissions and Releases</a></li>
  <li><a href="#key-variables" id="toc-key-variables" class="nav-link" data-scroll-target="#key-variables">Key Variables</a></li>
  <li><a href="#admissions-data" id="toc-admissions-data" class="nav-link" data-scroll-target="#admissions-data">Admissions Data</a></li>
  <li><a href="#releases-data" id="toc-releases-data" class="nav-link" data-scroll-target="#releases-data">Releases Data</a></li>
  <li><a href="#data-set-2-covid-19-cases-and-deaths" id="toc-data-set-2-covid-19-cases-and-deaths" class="nav-link" data-scroll-target="#data-set-2-covid-19-cases-and-deaths">Data Set 2: COVID-19 Cases and Deaths</a></li>
  <li><a href="#data-set-3-california-monthly-admissions-and-releases" id="toc-data-set-3-california-monthly-admissions-and-releases" class="nav-link" data-scroll-target="#data-set-3-california-monthly-admissions-and-releases">Data Set 3: California Monthly Admissions and Releases</a></li>
  <li><a href="#another-reference-california-race-population" id="toc-another-reference-california-race-population" class="nav-link" data-scroll-target="#another-reference-california-race-population">Another reference: California Race Population</a></li>
  </ul></li>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data Cleaning</a>
  <ul class="collapse">
  <li><a href="#loading-the-data" id="toc-loading-the-data" class="nav-link" data-scroll-target="#loading-the-data">Loading the Data</a></li>
  <li><a href="#cleaning-steps" id="toc-cleaning-steps" class="nav-link" data-scroll-target="#cleaning-steps">Cleaning Steps</a></li>
  <li><a href="#steps-for-cleaning-and-aggregating-covid-data" id="toc-steps-for-cleaning-and-aggregating-covid-data" class="nav-link" data-scroll-target="#steps-for-cleaning-and-aggregating-covid-data">Steps for Cleaning and Aggregating COVID Data:</a></li>
  </ul></li>
  <li><a href="#libraries-used-in-the-project" id="toc-libraries-used-in-the-project" class="nav-link" data-scroll-target="#libraries-used-in-the-project">Libraries Used in the Project</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data</h1>
</div>

<div>
  <div class="description">
    We describe the sources of our data and the cleaning process.
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><img src="images/Data-Cover.png" class="img-fluid"></p>
<section id="data-background" class="level1">
<h1>Data Background</h1>
<section id="data-sources" class="level2">
<h2 class="anchored" data-anchor-id="data-sources">Data Sources</h2>
</section>
<section id="data-set-1-prison-admissions-and-releases" class="level2">
<h2 class="anchored" data-anchor-id="data-set-1-prison-admissions-and-releases">Data Set 1: Prison Admissions and Releases</h2>
<p>The dataset can be accessed from the following sources:</p>
<ul>
<li><p><strong>Original source:</strong> <a href="https://www.kaggle.com/datasets/konradb/prison-population-in-the-us/data">Kaggle</a></p></li>
<li><p><strong>Article discussing the dataset:</strong> <a href="https://www.nature.com/articles/s41586-023-05980-2">Nature article</a></p></li>
</ul>
<p>This dataset focuses on the U.S. prison population, specifically examining the effects of the COVID-19 pandemic on racial disparities in incarceration. Collected as part of the study “COVID-19 Amplified Racial Disparities in the US Criminal Legal System”, it includes data on prison admissions and releases, broken down by race, across various states. Despite an overall decrease in the prison population during the pandemic, the proportion of Black and Hispanic prisoners increased. The dataset was gathered to understand how the pandemic worsened racial inequalities in the criminal justice system. The data is available on Kaggle and was discussed in a Nature article. <strong>This is the main dataset we are focusing on for our project.</strong> Our focus is on analyzing data from 2019 to the end of 2021, especially the long-term trends in admissions and releases, and how these trends relate to the pandemic’s impact on racial disparities. The data files contain information about monthly prison admissions and releases in the USA, categorized by race and state. Below is a description of the variables:</p>
</section>
<section id="key-variables" class="level2">
<h2 class="anchored" data-anchor-id="key-variables">Key Variables</h2>
<ul>
<li><p><strong>Date</strong>: Indicates the month and year of the recorded data.</p></li>
<li><p><strong>State</strong>: Identifies the state to which the data corresponds.<br>
This dataset includes data from 18 states:<br>
Arizona, Maine, Washington, Wisconsin, West Virginia, Utah, Texas, Oregon, Nebraska, Montana, Massachusetts, Kentucky, Kansas, Iowa, Illinois, Idaho, Colorado, and California.</p></li>
</ul>
</section>
<section id="admissions-data" class="level2">
<h2 class="anchored" data-anchor-id="admissions-data">Admissions Data</h2>
<p>These variables describe the number of people admitted to prison during the month:</p>
<ul>
<li><p><strong>admissions_total</strong>: Total admissions across all racial groups.</p></li>
<li><p><strong>admissions_white</strong>: Number of white individuals admitted.</p></li>
<li><p><strong>admissions_black</strong>: Number of black individuals admitted.</p></li>
<li><p><strong>admissions_asian</strong>: Number of Asian individuals admitted.</p></li>
<li><p><strong>admissions_hispanic</strong>: Number of Hispanic individuals admitted.</p></li>
<li><p><strong>admissions_amerind</strong>: Number of American Indian individuals admitted.</p></li>
<li><p><strong>admissions_other</strong>: Number of individuals from other or combined racial groups admitted.</p></li>
</ul>
</section>
<section id="releases-data" class="level2">
<h2 class="anchored" data-anchor-id="releases-data">Releases Data</h2>
<p>These variables describe the number of people released from prison during the month:</p>
<ul>
<li><p><strong>releases_total</strong>: Total releases across all racial groups.</p></li>
<li><p><strong>releases_white</strong>: Number of white individuals released.</p></li>
<li><p><strong>releases_black</strong>: Number of black individuals released.</p></li>
<li><p><strong>releases_asian</strong>: Number of Asian individuals released.</p></li>
<li><p><strong>releases_hispanic</strong>: Number of Hispanic individuals released.</p></li>
<li><p><strong>releases_amerind</strong>: Number of American Indian individuals released.</p></li>
<li><p><strong>releases_other</strong>: Number of individuals from other or combined racial groups released.</p></li>
</ul>
</section>
<section id="data-set-2-covid-19-cases-and-deaths" class="level2">
<h2 class="anchored" data-anchor-id="data-set-2-covid-19-cases-and-deaths">Data Set 2: COVID-19 Cases and Deaths</h2>
<p>The dataset can be accessed from the following source:</p>
<ul>
<li><p><strong>Original source:</strong> <a href="https://www.kaggle.com/datasets/fireballbyedimyrnmom/us-counties-covid-19-dataset">US Counties COVID-19 Dataset</a></p></li>
<li><p><strong>Data source:</strong> <a href="https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv">New York Times COVID-19 Data</a></p></li>
</ul>
<p>This dataset focuses on COVID-19 cases and deaths in the United States, sourced from the New York Times GitHub repository. It provides comprehensive data on the number of reported cases and deaths across all U.S. counties, with daily updates broken down by location and time. The dataset tracks the progression of the pandemic, starting from the first reported case on January 21, 2020, in Washington State. It offers valuable insights into the spread and impact of COVID-19 across different regions, enabling comparisons and trend analysis at both state and county levels. Our focus is on analyzing COVID-19 trends from 2020 to the present, particularly in relation to how these trends intersect with prison composition patterns and racial disparities.</p>
<ul>
<li><p><strong>Date</strong>: Specific date of the record.</p></li>
<li><p><strong>County</strong>: Identifies the county to which the data corresponds.</p></li>
<li><p><strong>State</strong>: Identifies the state to which the data corresponds.</p></li>
<li><p><strong>Cases</strong>: Number of reported cases.</p></li>
<li><p><strong>Deaths</strong>: Number of deaths due to COVID-19.</p></li>
</ul>
</section>
<section id="data-set-3-california-monthly-admissions-and-releases" class="level2">
<h2 class="anchored" data-anchor-id="data-set-3-california-monthly-admissions-and-releases">Data Set 3: California Monthly Admissions and Releases</h2>
<p>The dataset can be accessed from the following source:</p>
<ul>
<li><strong>Original source:</strong> <a href="https://data.ca.gov/dataset/monthly-admissions-and-releases">California Open Data Portal</a></li>
</ul>
<p>This dataset, available on the California Open Data Portal, tracks the total number of individuals admitted to and released from CDCR custody on a monthly basis, starting from January 31, 2014, to the present. It includes monthly data on total admissions, total releases, and yearly net changes. The data is collected every month, allowing for an in-depth analysis of trends in the state’s prison population over time. We used this dataset to cross-analyze with our main dataset to ensure that the trends in prison admissions and releases align and reflect similar patterns across both datasets.</p>
<ul>
<li><p><strong>Date</strong>: The specific month and year for which the data was recorded, formatted as MM/DD/YYYY.</p></li>
<li><p><strong>TotalAdmissions</strong>: The total number of individuals admitted to CDCR custody during the specified month.</p></li>
<li><p><strong>TotalReleases</strong>: The total number of individuals released from CDCR custody during the specified month.</p></li>
<li><p><strong>YearlyNetChange</strong>: The net change in the CDCR prison population on a yearly basis as of the specified month.</p></li>
</ul>
</section>
<section id="another-reference-california-race-population" class="level2">
<h2 class="anchored" data-anchor-id="another-reference-california-race-population">Another reference: California Race Population</h2>
<ul>
<li><strong>Original source:</strong> <a href="https://www2.census.gov/programs-surveys/popest/">US Census Bureau</a></li>
<li><strong>Article discussing the dataset:</strong> <a href="https://usafacts.org/data/topics/people-society/population-and-demographics/our-changing-population/state/california/?endDate=2020-01-01&amp;startDate=2019-01-01">USA Facts website</a></li>
</ul>
<p>This reference, found on the USA Facts website, uses data from the US Census Bureau and provides insights into California’s racial and ethnic demographics throughout the years. It helps us understand how the state’s population has shifted over time, particularly focusing on changes in the population size of different racial groups. Notably, in 2021, the largest racial or ethnic group in California was Hispanic/Latino, with a population of 15.7 million. Between 2019 and 2021, the Hispanic/Latino population saw the most growth, increasing by 190,640 individuals, from 15.5 million in 2019 to 15.7 million in 2021. The reference categorizes the population by race—White, Black, Hispanic, American Indian, Asian, and Other—allowing for a comparison across the different groups. This data provides valuable context for understanding demographic trends and shifts in California during this period. This analysis is based on a pie chart depicting California’s racial and ethnic demographics from 2019 to 2021, rather than a full dataset. The chart highlights the shifts in the state’s population across various racial groups, showing that in 2021, the largest racial or ethnic group was Hispanic/Latino, with 15.7 million individuals. Between 2019 and 2021, the Hispanic/Latino population experienced the most growth, increasing by 190,640 people, from 15.5 million in 2019 to 15.7 million in 2021. The chart categorizes the population into six racial groups: White, Black, Hispanic, American Indian, Asian, and Other, offering a visual comparison of these groups over the two-year period.</p>
<p><strong>How This Was Used in Analysis:</strong> We used this data to calculate proportions and compare racial compositions across three years. These insights allowed us to contextualize trends in prison admissions and releases relative to population demographics, ensuring a comprehensive understanding of racial disparities.</p>
</section>
</section>
<section id="data-cleaning" class="level1">
<h1>Data Cleaning</h1>
<p><a href="scripts/load_and_clean_data.R">Link to the load_and_clean_data.R</a></p>
<p>We cleaned our dataset with the following steps:</p>
<section id="loading-the-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-data">Loading the Data</h2>
<ul>
<li><strong>Loading the dataset</strong>: The dataset was read into R using the <code>read.csv()</code> function.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the dataset</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"admissions_releases_states.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>Checking the structure</strong>: We used the str() function to inspect the structure of the dataset.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   1914 obs. of  16 variables:
 $ date               : chr  "2015-02-01" "2015-03-01" "2015-04-01" "2015-05-01" ...
 $ admissions_total   : int  1583 1580 1779 1821 1689 1871 1784 1623 1673 1780 ...
 $ admissions_white   : int  600 615 706 730 704 758 760 659 673 734 ...
 $ admissions_black   : int  193 189 235 260 215 223 206 177 236 205 ...
 $ admissions_hispanic: num  633 640 701 669 618 738 670 629 636 696 ...
 $ admissions_amerind : num  130 114 115 125 129 121 119 123 102 110 ...
 $ admissions_asian   : num  6 3 4 8 0 5 6 8 8 10 ...
 $ admissions_other   : num  21 19 18 29 23 26 23 27 18 25 ...
 $ releases_total     : int  1649 1559 1693 1659 1570 1718 1637 1665 1653 1616 ...
 $ releases_white     : int  653 644 703 685 651 673 661 659 673 648 ...
 $ releases_black     : int  194 169 206 193 174 224 221 198 188 202 ...
 $ releases_hispanic  : num  688 610 657 616 603 662 626 653 641 630 ...
 $ releases_amerind   : num  85 111 93 136 111 132 107 120 123 108 ...
 $ releases_asian     : num  7 6 5 3 7 5 4 9 4 5 ...
 $ releases_other     : num  22 19 29 26 24 22 18 26 24 23 ...
 $ state              : chr  "Arizona" "Arizona" "Arizona" "Arizona" ...</code></pre>
</div>
</div>
</section>
<section id="cleaning-steps" class="level2">
<h2 class="anchored" data-anchor-id="cleaning-steps">Cleaning Steps</h2>
<ol type="1">
<li><strong>Date Conversion</strong> We converted the date column from character format to Date format for easier temporal analysis.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df<span class="sc">$</span>date, <span class="at">format =</span> <span class="st">"%Y-%m-%d"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li><strong>Variable Renaming</strong> To improve readability, variable names were renamed using the rename() function from dplyr.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>({</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">suppressWarnings</span>({</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(dplyr)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(ggplot2)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(lubridate)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(readr)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">Date =</span> date,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Admissions =</span> admissions_total,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">White_Admissions =</span> admissions_white,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Black_Admissions =</span> admissions_black,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hispanic_Admissions =</span> admissions_hispanic,</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">AmericanIndian_Admissions =</span> admissions_amerind,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Asian_Admissions =</span> admissions_asian,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">Other_Admissions =</span> admissions_other,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Releases =</span> releases_total,</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">White_Releases =</span> releases_white,</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">Black_Releases =</span> releases_black,</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hispanic_Releases =</span> releases_hispanic,</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">AmericanIndian_Releases =</span> releases_amerind,</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">Asian_Releases =</span> releases_asian,</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">Other_Releases =</span> releases_other,</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><strong>Handling Missing Values</strong> Missing values were identified and summarized using the sapply() function.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>missing_values <span class="ot">&lt;-</span> <span class="fu">sapply</span>(data, <span class="cf">function</span>(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x)))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(missing_values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     Date          Total_Admissions          White_Admissions 
                        0                         0                         0 
         Black_Admissions       Hispanic_Admissions AmericanIndian_Admissions 
                        0                         0                         0 
         Asian_Admissions          Other_Admissions            Total_Releases 
                        0                         0                         0 
           White_Releases            Black_Releases         Hispanic_Releases 
                        0                         0                         0 
  AmericanIndian_Releases            Asian_Releases            Other_Releases 
                        0                         0                         0 
                    State 
                        0 </code></pre>
</div>
</div>
<ol start="4" type="1">
<li><strong>Removing Duplicate Rows</strong> We used the distinct() function to remove duplicate rows and ensure data uniqueness.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li><strong>Summarizing Key</strong> We calculated total admissions and releases by race for the entire dataset using the summarise() function</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>admissions_totals <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_White_Admissions =</span> <span class="fu">sum</span>(White_Admissions, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Black_Admissions =</span> <span class="fu">sum</span>(Black_Admissions, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Hispanic_Admissions =</span> <span class="fu">sum</span>(Hispanic_Admissions, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_AmericanIndian_Admissions =</span> <span class="fu">sum</span>(AmericanIndian_Admissions, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Asian_Admissions =</span> <span class="fu">sum</span>(Asian_Admissions, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Other_Admissions =</span> <span class="fu">sum</span>(Other_Admissions, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Similarly, we summarized total releases:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>releases_totals <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_White_Releases =</span> <span class="fu">sum</span>(White_Releases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Black_Releases =</span> <span class="fu">sum</span>(Black_Releases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Hispanic_Releases =</span> <span class="fu">sum</span>(Hispanic_Releases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_AmericanIndian_Releases =</span> <span class="fu">sum</span>(AmericanIndian_Releases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Asian_Releases =</span> <span class="fu">sum</span>(Asian_Releases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Other_Releases =</span> <span class="fu">sum</span>(Other_Releases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="6" type="1">
<li><strong>Saving the Cleaned Data</strong> The cleaned dataset was saved as an RDS file for efficient reuse in further analysis.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(data, <span class="st">"dataset/cleaned_dataset.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="steps-for-cleaning-and-aggregating-covid-data" class="level2">
<h2 class="anchored" data-anchor-id="steps-for-cleaning-and-aggregating-covid-data">Steps for Cleaning and Aggregating COVID Data:</h2>
<p>To integrate this dataset into our analysis, we utilized the following process, consistent with Blog Post 7:</p>
<ol type="1">
<li><strong>Filtering Relevant States:</strong></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>({</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">suppressWarnings</span>({</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(dplyr)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(ggplot2)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(lubridate)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(readr)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries Used in the Project</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Manipulation</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)       <span class="co"># For data manipulation: filtering, renaming, summarizing, grouping</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)       <span class="co"># For reshaping and tidying datasets</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Reading and Writing</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)       <span class="co"># For reading and writing datasets efficiently</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Date Handling</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)   <span class="co"># For handling and converting date formats</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualization</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)     <span class="co"># For creating visualizations like charts and graphs</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="co"># String Manipulation</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)     <span class="co"># For handling and manipulating string variables</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Base R</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Utilized for foundational operations like inspecting dataset structures and handling missing values</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>states_to_keep <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Arizona"</span>, <span class="st">"Maine"</span>, <span class="st">"Washington"</span>, <span class="st">"Wisconsin"</span>, <span class="st">"West Virginia"</span>,<span class="st">"Utah"</span>, <span class="st">"Texas"</span>, <span class="st">"Oregon"</span>, <span class="st">"Nebraska"</span>, <span class="st">"Montana"</span>, <span class="st">"Massachusetts"</span>, <span class="st">"Kentucky"</span>, <span class="st">"Kansas"</span>, <span class="st">"Iowa"</span>, <span class="st">"Illinois"</span>, <span class="st">"Idaho"</span>, <span class="st">"Colorado"</span>, <span class="st">"California"</span>)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>nyt_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"dataset/us-counties.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>nyt_data<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(nyt_data<span class="sc">$</span>date)</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>nyt_data_filtered <span class="ot">&lt;-</span> nyt_data <span class="sc">%&gt;%</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">%in%</span> states_to_keep)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li><strong>Aggregating Data by State and Month:</strong></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>monthly_cumulative <span class="ot">&lt;-</span> nyt_data_filtered <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_month =</span> <span class="fu">floor_date</span>(date, <span class="st">"month"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, county, year_month) <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_cases =</span> <span class="fu">max</span>(cases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_deaths =</span> <span class="fu">max</span>(deaths, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><strong>Calculating Monthly Increments:</strong></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>monthly_increments <span class="ot">&lt;-</span> monthly_cumulative <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(state, county, year_month) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, county) <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">monthly_new_cases =</span> max_cases <span class="sc">-</span> <span class="fu">lag</span>(max_cases, <span class="dv">1</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">monthly_new_deaths =</span> max_deaths <span class="sc">-</span> <span class="fu">lag</span>(max_deaths, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>monthly_increments<span class="sc">$</span>monthly_new_cases[<span class="fu">is.na</span>(monthly_increments<span class="sc">$</span>monthly_new_cases)] <span class="ot">&lt;-</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  monthly_increments<span class="sc">$</span>max_cases[<span class="fu">is.na</span>(monthly_increments<span class="sc">$</span>monthly_new_cases)]</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>monthly_increments<span class="sc">$</span>monthly_new_deaths[<span class="fu">is.na</span>(monthly_increments<span class="sc">$</span>monthly_new_deaths)] <span class="ot">&lt;-</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  monthly_increments<span class="sc">$</span>max_deaths[<span class="fu">is.na</span>(monthly_increments<span class="sc">$</span>monthly_new_deaths)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li><strong>Summarizing Monthly Totals:</strong></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>monthly_covid <span class="ot">&lt;-</span> monthly_increments <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_month) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_monthly_cases =</span> <span class="fu">sum</span>(monthly_new_cases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_monthly_deaths =</span> <span class="fu">sum</span>(monthly_new_deaths, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li><strong>Merging with Prison Data:</strong></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"dataset/cleaned_dataset.rds"</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(data<span class="sc">$</span>Date)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>data_filtered <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">%in%</span> states_to_keep,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>         date <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2019-01-01"</span>) <span class="sc">&amp;</span> date <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2022-01-01"</span>))</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>admissions_monthly <span class="ot">&lt;-</span> data_filtered <span class="sc">%&gt;%</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_month =</span> <span class="fu">floor_date</span>(date, <span class="at">unit =</span> <span class="st">"month"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_month) <span class="sc">%&gt;%</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">monthly_admissions =</span> <span class="fu">sum</span>(Total_Admissions, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">monthly_releases =</span> <span class="fu">sum</span>(Total_Releases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>all_months <span class="ot">&lt;-</span> <span class="fu">seq.Date</span>(<span class="at">from =</span> <span class="fu">as.Date</span>(<span class="st">"2019-01-01"</span>), <span class="at">to =</span> <span class="fu">as.Date</span>(<span class="st">"2021-12-01"</span>), <span class="at">by =</span> <span class="st">"month"</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>all_months_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">year_month =</span> all_months)</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> all_months_df <span class="sc">%&gt;%</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(monthly_covid, <span class="at">by =</span> <span class="st">"year_month"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(admissions_monthly, <span class="at">by =</span> <span class="st">"year_month"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year_month <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2022-01-01"</span>))</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> model_data <span class="sc">%&gt;%</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_monthly_cases =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(total_monthly_cases), <span class="dv">0</span>, total_monthly_cases),</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_monthly_deaths =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(total_monthly_deaths), <span class="dv">0</span>, total_monthly_deaths),</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">monthly_admissions =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(monthly_admissions), <span class="dv">0</span>, monthly_admissions),</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">monthly_releases =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(monthly_releases), <span class="dv">0</span>, monthly_releases))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="libraries-used-in-the-project" class="level1">
<h1>Libraries Used in the Project</h1>
<p>The project leveraged several R libraries to perform data loading, cleaning, manipulation, and visualization. Below is the list of libraries and their purposes:</p>
<ol type="1">
<li><strong>dplyr</strong>:
<ul>
<li>Used for data manipulation tasks such as filtering, renaming variables, summarizing, grouping, and removing duplicates.</li>
</ul></li>
<li><strong>readr</strong>:
<ul>
<li>Utilized for reading and writing datasets efficiently, e.g., <code>read.csv()</code> and <code>write.csv()</code>.</li>
</ul></li>
<li><strong>lubridate</strong>:
<ul>
<li>Used for handling and converting date formats to enable temporal analysis.</li>
</ul></li>
<li><strong>tidyr</strong>:
<ul>
<li>Likely applied for reshaping and tidying datasets, although not explicitly mentioned in the code excerpts.</li>
</ul></li>
<li><strong>ggplot2</strong>:
<ul>
<li>Used for creating visualizations like charts and graphs to illustrate trends in the data.</li>
</ul></li>
<li><strong>stringr</strong>:
<ul>
<li>Possibly employed for string manipulation, though specific usages are not detailed.</li>
</ul></li>
<li><strong>base R</strong>:
<ul>
<li>Applied for foundational operations like inspecting dataset structures (<code>str()</code>) and identifying missing values using <code>sapply()</code>.</li>
</ul></li>
</ol>
<p>These libraries were crucial for ensuring efficient and effective data analysis throughout the project.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/sussmanbu\.github\.io\/ma-4615-fa24-final-project-group\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>