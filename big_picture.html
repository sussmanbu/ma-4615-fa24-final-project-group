<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>MA [46]15 Final Project: Group 10 - Locked Down by COVID-19: The Racial Reality of California’s Prisons</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">MA [46]15 Final Project: Group 10</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">MA [46]15 Final Project: Group 10</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./big_picture.html" aria-current="page"> 
<span class="menu-text">Locked Down by COVID-19: The Racial Reality of California’s Prisons</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./analysis.html"> 
<span class="menu-text">Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data.html"> 
<span class="menu-text">Data</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#shifts-in-admissions-the-pandemics-effect" id="toc-shifts-in-admissions-the-pandemics-effect" class="nav-link active" data-scroll-target="#shifts-in-admissions-the-pandemics-effect">Shifts in Admissions: The Pandemic’s Effect</a></li>
  <li><a href="#racial-patterns-in-releases-an-uneven-landscape" id="toc-racial-patterns-in-releases-an-uneven-landscape" class="nav-link" data-scroll-target="#racial-patterns-in-releases-an-uneven-landscape">Racial Patterns in Releases: An Uneven Landscape</a></li>
  <li><a href="#comparative-analysis-population-based-and-prison-based-insights" id="toc-comparative-analysis-population-based-and-prison-based-insights" class="nav-link" data-scroll-target="#comparative-analysis-population-based-and-prison-based-insights">Comparative Analysis: Population-Based and Prison-Based Insights</a>
  <ul class="collapse">
  <li><a href="#population-based-analysis-admissions" id="toc-population-based-analysis-admissions" class="nav-link" data-scroll-target="#population-based-analysis-admissions">Population-Based Analysis: Admissions</a></li>
  <li><a href="#population-based-analysis-releases" id="toc-population-based-analysis-releases" class="nav-link" data-scroll-target="#population-based-analysis-releases">Population-Based Analysis: Releases</a></li>
  <li><a href="#prison-based-analysis-admissions" id="toc-prison-based-analysis-admissions" class="nav-link" data-scroll-target="#prison-based-analysis-admissions">Prison-Based Analysis: Admissions</a></li>
  <li><a href="#prison-based-analysis-releases" id="toc-prison-based-analysis-releases" class="nav-link" data-scroll-target="#prison-based-analysis-releases">Prison-Based Analysis: Releases</a></li>
  </ul></li>
  <li><a href="#key-observations-and-implications" id="toc-key-observations-and-implications" class="nav-link" data-scroll-target="#key-observations-and-implications">Key Observations and Implications</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Locked Down by COVID-19: The Racial Reality of California’s Prisons</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><img src="images/CA covid-19.jpg" class="img-fluid"> # Unmasking Racial Disparities in California Prisons During COVID-19</p>
<p>California, home to the largest population in the United States, provides a significant lens for understanding racial patterns in its criminal justice system. By analyzing prison admissions and releases from 2019 to 2021, patterns emerge that illustrate how systemic factors, including the COVID-19 pandemic, have influenced incarceration dynamics. This study employs two analytical approaches: population-based analysis, which evaluates the proportion of racial groups admitted or released relative to their total state population, and prison-based analysis, which examines the racial composition of total prison admissions or releases.</p>
<p><strong>An analysis of California’s prison system during the COVID-19 pandemic reveals that Black and Hispanic populations faced disproportionate admissions and releases, reflecting deeper systemic inequities in incarceration that persist despite emergency measures.</strong></p>
<section id="shifts-in-admissions-the-pandemics-effect" class="level2">
<h2 class="anchored" data-anchor-id="shifts-in-admissions-the-pandemics-effect">Shifts in Admissions: The Pandemic’s Effect</h2>
<p>The analysis of <strong>Total Prison Admissions in California by Race (2019–2022)</strong> highlights changes in incarceration trends. In 2019, Hispanic admissions fluctuated between 1250 and 1500, peaking early in the year. Black and White admissions stabilized around 700, with White admissions reaching a high of 1400 in March. By early 2020, COVID-19 policies led to significant reductions in prison admissions, with numbers for all racial groups dropping to near zero. This decline reflected emergency measures designed to mitigate the spread of the virus.</p>
<p>As California began reopening in mid-2020, admissions rebounded to approximately half their pre-pandemic levels. By 2021, Hispanic admissions returned to around 1300, while Black and White admissions hovered around 750. Admissions categorized as “Other” stabilized at 250. Asian and American Indian data consistently recorded zero admissions, likely due to data reporting limitations rather than a true absence of admissions.</p>
<p><img src="images/Total AD CA RACE.png" class="img-fluid"></p>
</section>
<section id="racial-patterns-in-releases-an-uneven-landscape" class="level2">
<h2 class="anchored" data-anchor-id="racial-patterns-in-releases-an-uneven-landscape">Racial Patterns in Releases: An Uneven Landscape</h2>
<p>The trends captured in <strong>Total Prison Releases in California by Race (2019–2022)</strong> reveal parallel shifts in releases. Hispanic individuals consistently experienced the highest release rates, peaking at over 3000 in mid-2020. This peak reflects emergency measures to reduce overcrowding, prioritizing inmates nearing sentence completion or deemed low-risk. Black and White groups exhibited similar trends, with modest peaks in early 2020 followed by stabilization through 2021. The “Other” group recorded a sharp spike in late 2019 before stabilizing at lower levels.</p>
<p><img src="images/Total RE CA RACE.png" class="img-fluid"></p>
</section>
<section id="comparative-analysis-population-based-and-prison-based-insights" class="level2">
<h2 class="anchored" data-anchor-id="comparative-analysis-population-based-and-prison-based-insights">Comparative Analysis: Population-Based and Prison-Based Insights</h2>
<p>The dual approaches to analyzing racial dynamics provide complementary perspectives.</p>
<section id="population-based-analysis-admissions" class="level3">
<h3 class="anchored" data-anchor-id="population-based-analysis-admissions">Population-Based Analysis: Admissions</h3>
<p>Population-based analysis examines prison admissions relative to each racial group’s total population. In 2019, 0.36% of California’s Black population was admitted to prison, compared to 0.10% of Hispanics and 0.07% of Whites. The pandemic led to sharp declines in 2020, with Black admissions dropping to 0.12%, Hispanics to 0.03%, and Whites to 0.02%. By 2021, Black admissions rebounded to 0.28%, while Hispanic and White rates returned to 0.09% and 0.05%, respectively.</p>
<p><img src="images/Race AD-Race Population.png" class="img-fluid"></p>
</section>
<section id="population-based-analysis-releases" class="level3">
<h3 class="anchored" data-anchor-id="population-based-analysis-releases">Population-Based Analysis: Releases</h3>
<p>For prison releases, the Black population consistently exhibited the highest proportions. In 2019, 0.41% of Black Californians were released from prison, compared to 0.11% of Hispanics and 0.07% of Whites. In 2020, Black releases increased slightly to 0.43% before declining to 0.28% in 2021. Hispanic release rates dropped from 0.11% in 2019 to 0.08% in 2021, while White releases decreased from 0.07% to 0.04% over the same period.</p>
<p><img src="images/Race RE-Race Population.png" class="img-fluid"></p>
</section>
<section id="prison-based-analysis-admissions" class="level3">
<h3 class="anchored" data-anchor-id="prison-based-analysis-admissions">Prison-Based Analysis: Admissions</h3>
<p>Prison-based analysis shows the composition of total prison admissions by race. Hispanics consistently represented the largest group, accounting for 46.45% of total admissions in 2019, 46.22% in 2020, and 48.59% in 2021. Whites followed as the second-largest group, comprising 26.98% in 2019, 26.12% in 2020, and 25.14% in 2021. Black admissions made up 22.97% in 2019, 22.22% in 2020, and 21.13% in 2021, showing a slight decline. The “Other” category accounted for around 5-6% annually, while Asian and American Indian groups consistently recorded 0%.</p>
<p><img src="images/Race AD-Total AD.png" class="img-fluid"></p>
</section>
<section id="prison-based-analysis-releases" class="level3">
<h3 class="anchored" data-anchor-id="prison-based-analysis-releases">Prison-Based Analysis: Releases</h3>
<p>For releases, Hispanics also represented the largest group, accounting for 46.21% in 2019, 46.21% in 2020, and 49.03% in 2021. Whites and Blacks followed similar patterns to admissions, with Whites comprising 26.58% in 2019, 26.66% in 2020, and 25.31% in 2021. Black releases accounted for 22.99% in 2019, 22.21% in 2020, and 21.44% in 2021. The “Other” category saw a decline from 5.38% in 2019 to 4.92% in 2020, stabilizing at 4.22% in 2021. Asian and American Indian release rates remained at 0% across all years.</p>
<p><img src="images/Race RE-Total RE.png" class="img-fluid"></p>
</section>
</section>
<section id="key-observations-and-implications" class="level2">
<h2 class="anchored" data-anchor-id="key-observations-and-implications">Key Observations and Implications</h2>
<p>This analysis highlights notable differences in prison admissions and releases across racial groups in California, influenced by both systemic factors and the COVID-19 pandemic. The data shows that while total incarceration rates dropped during the pandemic, the magnitude of these changes varied across racial groups. Admissions and releases for Hispanic and Black populations represented significant portions of the total, with minor fluctuations over the three years.</p>
<p>Asian and American Indian groups consistently recorded zero admissions and releases, which likely reflects gaps in data reporting rather than an actual absence of incarceration activity. Addressing these gaps is essential for a more comprehensive understanding of racial dynamics in California’s criminal justice system.</p>
<p>By employing population-based and prison-based approaches, this study provides a multidimensional perspective on incarceration trends. These findings offer valuable insights for policymakers, researchers, and stakeholders interested in understanding and addressing racial disparities within the justice system.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/sussmanbu\.github\.io\/ma-4615-fa24-final-project-group\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>